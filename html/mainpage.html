<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Delphi Translate</title>
	<link rel="icon" type="image/x-icon" href="@env.Resource/static/img/favicon.ico">

	<!-- Bootstrap CSS via https://getbootstrap.com/docs/5.3/getting-started/introduction/ -->
	<!-- IMPORTANT: In case of importing links from CDNs, the @ symbol needs to be typed twice to escape it -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
	
	<!-- Bootstrap Icons CSS -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@@1.11.3/font/bootstrap-icons.min.css">
	
	<!-- Styles specific to this site -->
	<link rel="stylesheet" href="@env.Resource/static/css/custom.css">

	<script src="https://unpkg.com/htmx.org@@2.0.4"></script>
	@if (env.IsRadServer) {
	<script src="https://unpkg.com/htmx.org/dist/ext/json-enc.js"></script>
	}
	
</head>

<body>
	<!-- header -->
	<div><button hx-get="/menu" name="menubutton" hx-target="#thelogo"  hx-swap="outerHTML" class="btn bs-primary-text align-baseline"><i class="bi bi-list fs-6">&nbsp;</i></button><span class="logo"><img id="thelogo" src="@env.Resource/static/img/glogo.svg" class="img-thumbnail border border-0" alt="...">&nbsp;</span><span class="fs-5 align-middle">&nbsp;Translate</span>
	</div>
	<!-- option buttons -->
	<div class="button-container">
        <button hx-get="/translatetext" hx-include="[name='ogcontent']" name="translatebutton" hx-target="#translatedcontent" class="btn btn-outline-primary bs-primary-text"><i class="bi bi-alphabet">&nbsp;</i>Text</button>
        <button type="button" class="btn btn-outline-primary bs-primary-text"><i class="bi bi-images">&nbsp;</i>Images</button>
        <button type="button" class="btn btn-outline-primary bs-primary-text"><i class="bi bi-file-earmark-fill">&nbsp;</i>Documents</button>
        <button type="button" class="btn btn-outline-primary bs-primary-text"><i class="bi bi-layout-text-window">&nbsp;</i>Websites</button>
   </div>
   
	<!-- language bar -->
	<div class="lang-container">
		<nav class="navbar navbar-expand-lg bg-body-tertiary">
			<div>
			  <ul class="navbar-nav me-auto mb-2 mb-lg-0">
					<li class="nav-item">
					  <a class="nav-link active text-primary" aria-current="page" href="#">Detect language</a>
					</li>
					<li class="nav-item">
					  <a class="nav-link" href="#">German</a>
					</li>
					<li class="nav-item">
					  <a class="nav-link" href="#">English</a>
					</li>
					<li class="nav-item">
					  <a class="nav-link" href="#">Spanish</a>
					</li>
					<li class="nav-item dropdown">
					  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
						&nbsp;
					  </a>
					  <ul class="dropdown-menu">
							<li><a class="dropdown-item" href="#"><i class="bi bi-alphabet">&nbsp;</i>Detect language</a></li>
							<li><a class="dropdown-item" href="#">English</a></li>
							<li><a class="dropdown-item" href="#">Klingon</a></li>
							<li><hr class="dropdown-divider"></li>
							<li><a class="dropdown-item" href="#">Other languages</a></li>
				  	</ul>
					</li>
				</div>
				
			<!-- this allows the two text boxes to be swapped around -->
			<div class="lang-swap position-absolute top-10 start-50 translate-middle-x">
			<button hx-get="/swap" name="swapbutton" hx-target="#textboxes" hx-swap="outerHTML" hx-include="[name='ogcontent'], [name='transcontent']" class="btn bs-primary-text"><i class="bi bi-arrow-left-right">&nbsp;</i></button>
			</div>
			
			<!-- the right-hand language bar -->
			<ul class="navbar-nav me-auto mb-2 mb-lg-0 position-relative start-50 translate-middle-x">
			<li class="nav-item">
			  <a class="nav-link active text-primary" href="#">English</a>
			</li>
			<li class="nav-item">
			  <a class="nav-link" href="#">Spanish</a>
			</li>
			<li class="nav-item">
			  <a class="nav-link" href="#">Arabic</a>
			</li>
			<li class="nav-item dropdown">
			  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
				&nbsp;
			  </a>
			  <ul class="dropdown-menu">
					<li><a class="dropdown-item" href="#"><i class="bi bi-alphabet">&nbsp;</i>Detect language</a></li>
					<li><a class="dropdown-item" href="#">English</a></li>
					<li><a class="dropdown-item" href="#">Klingon</a></li>
					<li><hr class="dropdown-divider"></li>
					<li><a class="dropdown-item" href="#">Other languages</a></li>
				</ul>
			</li>
			</ul>
			</nav>
		</div>       
	
	<!-----------------------------------> 
	<!--- Where the real work happens! -->
	<!----------------------------------->
	<div class="textcontainer" id="textboxes">
			<textarea id="originalcontent" name="ogcontent" maxlength="5000" hx-post="/translatetext" hx-trigger="delay:500ms changed" hx-target="#translatedcontent" hx-swap="innerHTML"></textarea>
			&nbsp;
	    <textarea id="translatedcontent" name="transcontent" placeholder="Translation"></textarea>
	</div>
	
<div class="feedback"><a href="#">Send feedback</a></div>	
<div class="textcontainer text-center" id="bottom_icons" >
  <div class="row">
    <div class="col">
      <i class="bi bi-clock-history text-secondary fs-4">&nbsp;</i>
    </div>
    <div class="col">
      &nbsp;
    </div>
    <div class="col">
      <i class="bi bi-star-fill text-secondary fs-4">&nbsp;</i>
    </div>
  </div>
</div>

<div class="produced">
Page Produced: @system.timestamp
</div>
	
	<!-- Bootstrap JS -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@@5.3.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
		crossorigin="anonymous"></script>

<script>
	const textarea = document.getElementById('originalcontent');

	textarea.addEventListener('paste', async (event) => {
	  try {
	  	// Read text from clipboard
	    const pastedText = await navigator.clipboard.readText();

	    // Process the pasted text (e.g., log it or update the textarea)
	    console.log('Pasted text:', pastedText);
	    document.getElementsByName('translatebutton')[0].click();
	    // textarea.value += pastedText; // Append to current value
		} catch (err) {
	  	console.error('Failed to read clipboard: ', err);
		}
   });
   
</script>

</body>
</html>
